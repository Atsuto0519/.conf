'use babel';

var _require = require('immutable');

var fromJS = _require.fromJS;

module.exports = function output(state, action) {
  if (state === undefined) state = [];

  switch (action.type) {
    case "LOG_RECEIVED":
      var immutableState = fromJS(state);
      var outputString = action.output;
      var splitedOutputString = outputString.split('\n');
      splitedOutputString.forEach(function (stringWithoutNewline) {
        if (stringWithoutNewline != "") {
          immutableState = immutableState.push(stringWithoutNewline);
          if (state.length > 1000) immutableState = immutableState.shift();
        }
      });
      return immutableState.toJS();
      break;
    case "LOG_RESET":
      return [];
      break;
    default:
      return state;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ob3RtYW4vLmF0b20vcGFja2FnZXMvZG9ja2VyL2xpYi9yZWR1eC9yZWR1Y2Vycy9vdXRwdXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsV0FBVyxDQUFBOztlQUVJLE9BQU8sQ0FBQyxXQUFXLENBQUM7O0lBQTlCLE1BQU0sWUFBTixNQUFNOztBQUVYLE1BQU0sQ0FBQyxPQUFPLEdBQUcsU0FBUyxNQUFNLENBQUMsS0FBSyxFQUFPLE1BQU0sRUFBRTtNQUFwQixLQUFLLGdCQUFMLEtBQUssR0FBRyxFQUFFOztBQUN6QyxVQUFPLE1BQU0sQ0FBQyxJQUFJO0FBQ2hCLFNBQUssY0FBYztBQUNqQixVQUFJLGNBQWMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbkMsVUFBSSxZQUFZLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUNqQyxVQUFJLG1CQUFtQixHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbkQseUJBQW1CLENBQUMsT0FBTyxDQUFDLFVBQUMsb0JBQW9CLEVBQUs7QUFDcEQsWUFBSSxvQkFBb0IsSUFBSSxFQUFFLEVBQUU7QUFDOUIsd0JBQWMsR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFDM0QsY0FBSSxLQUFLLENBQUMsTUFBTSxHQUFHLElBQUksRUFDckIsY0FBYyxHQUFHLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUMzQztPQUNGLENBQUMsQ0FBQztBQUNILGFBQU8sY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQzdCLFlBQU07QUFBQSxBQUNSLFNBQUssV0FBVztBQUNkLGFBQU8sRUFBRSxDQUFDO0FBQ1YsWUFBTTtBQUFBLEFBQ1I7QUFDRSxhQUFPLEtBQUssQ0FBQztBQUFBLEdBQ2hCO0NBQ0YsQ0FBQyIsImZpbGUiOiIvVXNlcnMvaG90bWFuLy5hdG9tL3BhY2thZ2VzL2RvY2tlci9saWIvcmVkdXgvcmVkdWNlcnMvb3V0cHV0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBiYWJlbCdcblxudmFyIHtmcm9tSlN9ID0gcmVxdWlyZSgnaW1tdXRhYmxlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gb3V0cHV0KHN0YXRlID0gW10sIGFjdGlvbikge1xuICBzd2l0Y2goYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIFwiTE9HX1JFQ0VJVkVEXCI6XG4gICAgICBsZXQgaW1tdXRhYmxlU3RhdGUgPSBmcm9tSlMoc3RhdGUpO1xuICAgICAgbGV0IG91dHB1dFN0cmluZyA9IGFjdGlvbi5vdXRwdXQ7XG4gICAgICBsZXQgc3BsaXRlZE91dHB1dFN0cmluZyA9IG91dHB1dFN0cmluZy5zcGxpdCgnXFxuJyk7XG4gICAgICBzcGxpdGVkT3V0cHV0U3RyaW5nLmZvckVhY2goKHN0cmluZ1dpdGhvdXROZXdsaW5lKSA9PiB7XG4gICAgICAgIGlmIChzdHJpbmdXaXRob3V0TmV3bGluZSAhPSBcIlwiKSB7XG4gICAgICAgICAgaW1tdXRhYmxlU3RhdGUgPSBpbW11dGFibGVTdGF0ZS5wdXNoKHN0cmluZ1dpdGhvdXROZXdsaW5lKTtcbiAgICAgICAgICBpZiAoc3RhdGUubGVuZ3RoID4gMTAwMClcbiAgICAgICAgICAgIGltbXV0YWJsZVN0YXRlID0gaW1tdXRhYmxlU3RhdGUuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gaW1tdXRhYmxlU3RhdGUudG9KUygpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIkxPR19SRVNFVFwiOlxuICAgICAgcmV0dXJuIFtdO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufTtcbiJdfQ==